{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export class FilterBuilder {\n  constructor(data, options = {}) {\n    this.data = data;\n    this.query = \"\";\n  }\n\n  where(...query) {\n    this.makeAnd();\n    if (typeof query[0] === \"function\") {\n      this.query += \"(\";\n      query[0](this);\n      this.query += \")\";\n    } else {\n      if (query.length === 1) {\n        this.query += `(item.${query[0]})`;\n      } else if (query.length === 2) {\n        this.query += `(item.${query[0]} == ${typeof query[1] === 'string' ? \"'\" + query[1] + \"'\" : query[1]})`;\n      } else if (query.length === 3) {\n        this.query += `(item.${query[0]} ${query[1]} ${typeof query[2] === 'string' ? \"'\" + query[2] + \"'\" : query[2]})`;\n      }\n    }\n    return this;\n  }\n\n  orWhere(...query) {\n    this.query += \" || \";\n    return this.where(...query);\n  }\n\n  whereIncludes(list, key, value = null) {\n    this.makeAnd();\n    if (value == null) {\n      this.query += `(item.${list} ? item.${list}.includes('${key}') : false)`;\n      return this;\n    }\n    this.query += `(item.${list} ? item.${list}.some(element => element.${key} === '${value}') : false)`;\n    return this;\n  }\n\n  orWhereIncludes(list, key, value = null) {\n    this.query += \" || \";\n    this.whereIncludes(list, key, value);\n    return this;\n  }\n\n  whereContains(key, value) {\n    this.makeAnd();\n    this.query += `(item.${key} ? item.${key}.toLowerCase().includes('${value.toLowerCase()}') : false)`;\n    return this;\n  }\n\n  orWhereContains(key, value) {\n    this.query += \" || \";\n    this.whereContains(key, value);\n    return this;\n  }\n\n  whereIn(key, list) {\n    this.makeAnd();\n    this.query += `(item.${key} ? ['${list.join(\n      \"', '\"\n    )}'].includes(\"\" + item.${key}) : false)`;\n    return this;\n  }\n\n  orWhereIn(key, list) {\n    this.query += \" || \";\n    this.whereIn(key, list);\n    return this;\n  }\n\n  makeAnd() {\n    if (this.query.slice(-1).includes(\")\")) {\n      this.query += \" && \";\n    }\n  }\n\n  stripEmpties() {\n    this.query = this.query.replace(/&& \\(\\)/g, \"\");\n    this.query = this.query.replace(/\\(\\)  &&/g, \"\");\n    this.query = this.query.replace(/\\(\\) &&/g, \"\");\n  }\n\n  get() {\n    this.stripEmpties();\n    return this.data.filter(item => {\n      return new Function(\"item\", `\"use strict\";return ${this.query};`)(item);\n    });\n  }\n}\n"],"names":["FilterBuilder","constructor","data","options","query","where","makeAnd","this","length","orWhere","whereIncludes","list","key","value","orWhereIncludes","whereContains","toLowerCase","orWhereContains","whereIn","join","orWhereIn","slice","includes","stripEmpties","replace","get","filter","item","Function"],"mappings":"IAAaA,EACXC,SAAYC,EAAMC,kBAAU,SACrBD,KAAOA,OACPE,MAAQ,gBAGfC,oFACOC,UACmB,mBAAbF,EAAM,SACVA,OAAS,IACdA,EAAM,GAAGG,WACJH,OAAS,KAEO,IAAjBA,EAAMI,YACHJ,OAAU,SAAQA,EAAM,OACH,IAAjBA,EAAMI,YACVJ,OAAU,SAAQA,EAAM,WAA6B,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,QACxE,IAAjBA,EAAMI,cACVJ,OAAU,SAAQA,EAAM,OAAMA,EAAM,QAA0B,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,SAGxGG,kBAGTE,wFACOL,OAAS,UACPG,MAAKF,cAASD,gBAGvBM,uBAAcC,EAAMC,EAAKC,yBAAQ,WAC1BP,UACQ,MAATO,QACGT,OAAU,SAAQO,aAAeA,gBAAkBC,gBACjDL,YAEJH,OAAU,SAAQO,aAAeA,8BAAgCC,WAAYC,gBAC3EN,mBAGTO,yBAAgBH,EAAMC,EAAKC,yBAAQ,WAC5BT,OAAS,YACTM,cAAcC,EAAMC,EAAKC,GACvBN,kBAGTQ,uBAAcH,EAAKC,eACZP,eACAF,OAAU,SAAQQ,aAAcA,8BAA+BC,EAAMG,4BACnET,kBAGTU,yBAAgBL,EAAKC,eACdT,OAAS,YACTW,cAAcH,EAAKC,GACjBN,kBAGTW,iBAAQN,EAAKD,eACNL,eACAF,OAAU,SAAQQ,UAAWD,EAAKQ,KACrC,kCACwBP,eACnBL,kBAGTa,mBAAUR,EAAKD,eACRP,OAAS,YACTc,QAAQN,EAAKD,GACXJ,kBAGTD,mBACMC,KAAKH,MAAMiB,OAAO,GAAGC,SAAS,YAC3BlB,OAAS,qBAIlBmB,6BACOnB,MAAQG,KAAKH,MAAMoB,QAAQ,WAAY,SACvCpB,MAAQG,KAAKH,MAAMoB,QAAQ,UAAa,SACxCpB,MAAQG,KAAKH,MAAMoB,QAAQ,WAAY,iBAG9CC,sCACOF,eACEhB,KAAKL,KAAKwB,gBAAOC,UACf,IAAIC,SAAS,8BAA+BrB,YAA5C,CAA2DoB"}